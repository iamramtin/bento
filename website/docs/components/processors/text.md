---
title: text
type: processor
---

<!--
     THIS FILE IS AUTOGENERATED!

     To make changes please edit the contents of:
     lib/processor/text.go
-->


DEPRECATED: This processor is now deprecated, and the new
[bloblang processor](/docs/components/processors/bloblang) should be used
instead.


import Tabs from '@theme/Tabs';

<Tabs defaultValue="common" values={[
  { label: 'Common', value: 'common', },
  { label: 'Advanced', value: 'advanced', },
]}>

import TabItem from '@theme/TabItem';

<TabItem value="common">

```yaml
# Common config fields, showing default values
text:
  operator: trim_space
  arg: ""
  value: ""
```

</TabItem>
<TabItem value="advanced">

```yaml
# All config fields, showing default values
text:
  operator: trim_space
  arg: ""
  value: ""
  parts: []
```

</TabItem>
</Tabs>

This processor will interpolate functions within the `value` field,
you can find a list of functions [here](/docs/configuration/interpolation#functions).

Value interpolations are resolved once per message batch, in order to resolve it
for each message of the batch place it within a
[`for_each`](/docs/components/processors/for_each) processor:

``` yaml
for_each:
- text:
    operator: set
    value: ${!json("document.content")}
```

## Fields

### `operator`

A text based [operation](#operators) to execute.


Type: `string`  
Default: `"trim_space"`  
Options: `append`, `escape_url_query`, `unescape_url_query`, `find_regexp`, `prepend`, `quote`, `regexp_expand`, `replace`, `replace_regexp`, `set`, `strip_html`, `to_lower`, `to_upper`, `trim`, `trim_space`, `unquote`.

### `arg`

An argument for the operator (not always applicable).


Type: `string`  
Default: `""`  

### `value`

A value to use with the operator.
This field supports [interpolation functions](/docs/configuration/interpolation#functions).


Type: `string`  
Default: `""`  

### `parts`

An optional array of message indexes of a batch that the processor should apply to.
If left empty all messages are processed. This field is only applicable when
batching messages [at the input level](/docs/configuration/batching).

Indexes can be negative, and if so the part will be selected from the end
counting backwards starting from -1.


Type: `array`  
Default: `[]`  

## Operators

### `append`

Appends text to the end of the payload.

### `escape_url_query`

Escapes text so that it is safe to place within the query section of a URL.

### `unescape_url_query`

Unescapes text that has been url escaped.

### `find_regexp`

Extract the matching section of the argument regular expression in a message.

### `prepend`

Prepends text to the beginning of the payload.

### `quote`

Returns a doubled-quoted string, using escape sequences (\t, \n, \xFF, \u0100)
for control characters and other non-printable characters.

### `regexp_expand`

Expands each matched occurrence of the argument regular expression according to
a template specified with the `value` field, and replaces the message
with the aggregated results.

Inside the template $ signs are interpreted as submatch expansions, e.g. $1
represents the text of the first submatch.

For example, given the following config:

```yaml
  - text:
      operator: regexp_expand
      arg: "(?m)(?P<key>\\w+):\\s+(?P<value>\\w+)$"
      value: "$key=$value\n"
```

And a message containing:

```text
option1: value1
# comment line
option2: value2
```

The resulting payload would be:

```text
option1=value1
option2=value2
```

### `replace`

Replaces all occurrences of the argument in a message with a value.

### `replace_regexp`

Replaces all occurrences of the argument regular expression in a message with a
value. Inside the value $ signs are interpreted as submatch expansions, e.g. $1
represents the text of the first submatch.

### `set`

Replace the contents of a message entirely with a value.

### `strip_html`

Removes all HTML tags from a message.

### `to_lower`

Converts all text into lower case.

### `to_upper`

Converts all text into upper case.

### `trim`

Removes all leading and trailing occurrences of characters within the arg field.

### `trim_space`

Removes all leading and trailing whitespace from the payload.

### `unquote`

Unquotes a single, double, or back-quoted string literal

