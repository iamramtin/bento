---
title: grok
type: processor
status: stable
categories: ["Parsing"]
---

<!--
     THIS FILE IS AUTOGENERATED!

     To make changes please edit the contents of:
     lib/processor/grok.go
-->

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';


Parses messages into a structured format by attempting to apply a list of Grok
patterns, if a pattern returns at least one value a resulting structured object
is created according to the chosen output format.


<Tabs defaultValue="common" values={[
  { label: 'Common', value: 'common', },
  { label: 'Advanced', value: 'advanced', },
]}>

<TabItem value="common">

```yaml
# Common config fields, showing default values
grok:
  patterns: []
  pattern_definitions: {}
  output_format: json
```

</TabItem>
<TabItem value="advanced">

```yaml
# All config fields, showing default values
grok:
  patterns: []
  pattern_definitions: {}
  output_format: json
  named_captures_only: true
  use_default_patterns: true
  remove_empty_values: true
  parts: []
```

</TabItem>
</Tabs>

Currently only json is a supported output format.

Type hints within patterns are respected, therefore with the pattern
`%{WORD:first},%{INT:second:int}` and a payload of `foo,1`
the resulting payload would be `{"first":"foo","second":1}`.

### Performance

This processor currently uses the [Go RE2](https://golang.org/s/re2syntax)
regular expression engine, which is guaranteed to run in time linear to the size
of the input. However, this property often makes it less performant than pcre
based implementations of grok. For more information see
[https://swtch.com/~rsc/regexp/regexp1.html](https://swtch.com/~rsc/regexp/regexp1.html).

## Fields

### `patterns`

A list of patterns to attempt against the incoming messages.


Type: `array`  
Default: `[]`  

### `pattern_definitions`

A map of pattern definitions that can be referenced within `patterns`.


Type: `object`  
Default: `{}`  

### `output_format`

The structured output format.


Type: `string`  
Default: `"json"`  
Options: `json`.

### `named_captures_only`

Whether to only capture values from named patterns.


Type: `bool`  
Default: `true`  

### `use_default_patterns`

Whether to use a [default set of patterns](#default-patterns).


Type: `bool`  
Default: `true`  

### `remove_empty_values`

Whether to remove values that are empty from the resulting structure.


Type: `bool`  
Default: `true`  

### `parts`

An optional array of message indexes of a batch that the processor should apply to.
If left empty all messages are processed. This field is only applicable when
batching messages [at the input level](/docs/configuration/batching).

Indexes can be negative, and if so the part will be selected from the end
counting backwards starting from -1.


Type: `array`  
Default: `[]`  


